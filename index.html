<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <!-- 🍎 iOS 全屏与状态栏 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- 改这里 -->
  <meta name="theme-color" content="rgba(0,0,0,0)">
  <title>Echo Garden</title>

  <link rel="stylesheet" href="css/main.css">
  <link rel="apple-touch-icon" sizes="512x512" href="assets/icons/icon512.png">
  <link rel="icon" href="assets/icons/icon512.png" type="image/png">
  <script src="js/main.js" defer></script>
</head>

<body>
  <img id="bg-layer" src="assets/bg/night.jpeg" alt="background">
  <button id="theme-toggle" aria-label="切换主题">🌗</button>
  
<!-- === 信息组件（柔光液态玻璃） === -->
<div id="info-widget">
  <div class="top-panel">
    <div class="battery-box">
      <div class="battery-text">Battery <span id="battery-level">--%</span></div>
      <svg class="battery-circle" width="36" height="36" viewBox="0 0 36 36">
        <circle class="bg" cx="18" cy="18" r="16" />
        <circle class="progress" cx="18" cy="18" r="16" />
      </svg>
    </div>
  </div>

  <div class="bottom-panel">
    <div class="left">
      <img id="profile-img" src="assets/icons/sample.png" alt="icon" />
    </div>
    <div class="center">
      <p id="custom-text">Daily🤍 ✧˚⋆</p>
      <p id="date-line"><span id="date"></span> · <span id="weekday"></span></p>
    </div>
    <div class="right">
      <p id="time">--:--</p>
    </div>
  </div>
</div>

<style>
/* === 外层容器 === */
#info-widget {
  position: absolute;
  top: 140px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 340px;
  padding: 16px 20px;
  border-radius: 30px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(15px) saturate(150%);
  box-shadow: 0 4px 20px rgba(255,255,255,0.1);
  color: #fff;
  font-family: "SF Pro Display", "PingFang SC", sans-serif;
}

/* === 上部：电量条 + 圆形进度 === */
.top-panel {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  background: rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 6px 14px;
}
.battery-box {
  display: flex;
  align-items: center;
  gap: 10px;
}
.battery-text {
  font-size: 13px;
  letter-spacing: 0.3px;
  opacity: 0.9;
}
.battery-circle {
  transform: rotate(-90deg);
}
.battery-circle .bg {
  fill: none;
  stroke: rgba(255,255,255,0.2);
  stroke-width: 3;
}
.battery-circle .progress {
  fill: none;
  stroke: #fff;
  stroke-width: 3;
  stroke-linecap: round;
  stroke-dasharray: 100;
  stroke-dashoffset: 100;
  transition: stroke-dashoffset 0.5s ease;
}

/* === 下部：圆角信息栏 === */
.bottom-panel {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(255,255,255,0.15);
  border-radius: 25px;
  padding: 10px 16px;
}
.bottom-panel img {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255,255,255,0.3);
  box-shadow: 0 0 8px rgba(255,255,255,0.2);
}
.center {
  text-align: left;
  flex: 1;
  margin-left: 10px;
}
#custom-text {
  font-size: 15px;
  font-weight: 500;
}
#date-line {
  font-size: 13px;
  opacity: 0.85;
  margin-top: 3px;
}
.right #time {
  font-size: 22px;
  font-weight: 600;
}
</style>

<script>
function updateWidget() {
  const now = new Date();
  const date = `${now.getMonth()+1}月 ${now.getDate()}`;
  const weekday = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][now.getDay()];
  const time = now.toTimeString().slice(0,5);
  document.getElementById("date").textContent = date;
  document.getElementById("weekday").textContent = weekday;
  document.getElementById("time").textContent = time;
}
updateWidget();
setInterval(updateWidget, 60000);

// 电量更新
navigator.getBattery && navigator.getBattery().then(b => {
  const updateBattery = () => {
    const level = Math.round(b.level * 100);
    document.getElementById("battery-level").textContent = `${level}%`;
    const circle = document.querySelector(".battery-circle .progress");
    const offset = 100 - level;
    circle.style.strokeDashoffset = offset;
  };
  updateBattery();
  b.addEventListener("levelchange", updateBattery);
});
</script>


  
  <!-- 主屏 -->
  <main id="homescreen">
    <div class="app-grid">
      <div class="app-icon" data-app="message"><img src="assets/icons/message.png"><p>消息</p></div>
      <div class="app-icon" data-app="diary"><img src="assets/icons/diary.png"><p>日记</p></div>
      <div class="app-icon" data-app="tarot"><img src="assets/icons/tarot.png"><p>塔罗</p></div>
      <div class="app-icon" data-app="forum"><img src="assets/icons/forum.png"><p>论坛</p></div>
      <div class="app-icon" data-app="words"><img src="assets/icons/words.png"><p>单词</p></div>
      <div class="app-icon" data-app="memo"><img src="assets/icons/memo.png"><p>心声</p></div>
      <div class="app-icon" data-app="settings"><img src="assets/icons/settings.png"><p>设置</p></div>
    </div>
  </main>

  <section id="app-container" style="display:none;"></section>
</body>
</html>







