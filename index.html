<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <!-- ğŸ iOS å…¨å±ä¸çŠ¶æ€æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- æ”¹è¿™é‡Œ -->
  <meta name="theme-color" content="rgba(0,0,0,0)">
  <title>Echo Garden</title>

  <link rel="stylesheet" href="css/main.css">
  <link rel="apple-touch-icon" sizes="512x512" href="assets/icons/icon512.png">
  <link rel="icon" href="assets/icons/icon512.png" type="image/png">
  <script src="js/main.js" defer></script>
</head>

<body>
  <img id="bg-layer" src="assets/bg/night.jpeg" alt="background">
  <button id="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ—</button>
  
<!-- === é¡¶éƒ¨ä¿¡æ¯ç»„ä»¶ === -->
<div id="widget">
  <div class="battery">Battery <span id="battery-level">--%</span></div>
  <div class="info">
    <span id="custom-text">DailyğŸ¤</span>
    <span id="date"></span> Â· <span id="weekday"></span>
    <span id="time"></span>
  </div>
</div>

<style>
#widget {
  position: absolute;
  top: 60px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 12px 20px;
  color: white;
  font-family: "SF Pro Display", sans-serif;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
#widget .battery {
  font-size: 12px;
  opacity: 0.8;
}
#widget .info {
  font-size: 14px;
  margin-top: 4px;
}
</style>

<script>
function updateWidget() {
  const now = new Date();
  const date = `${now.getMonth()+1}æœˆ ${now.getDate()}`;
  const weekday = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][now.getDay()];
  const time = now.toTimeString().slice(0,5);
  document.getElementById("date").textContent = date;
  document.getElementById("weekday").textContent = weekday;
  document.getElementById("time").textContent = time;
}
updateWidget();
setInterval(updateWidget, 60000);

navigator.getBattery && navigator.getBattery().then(b => {
  const updateBattery = () => {
    document.getElementById("battery-level").textContent = `${Math.round(b.level*100)}%`;
  };
  updateBattery();
  b.addEventListener('levelchange', updateBattery);
});
</script>
  
  <!-- ä¸»å± -->
  <main id="homescreen">
    <div class="app-grid">
      <div class="app-icon" data-app="message"><img src="assets/icons/message.png"><p>æ¶ˆæ¯</p></div>
      <div class="app-icon" data-app="diary"><img src="assets/icons/diary.png"><p>æ—¥è®°</p></div>
      <div class="app-icon" data-app="tarot"><img src="assets/icons/tarot.png"><p>å¡”ç½—</p></div>
      <div class="app-icon" data-app="forum"><img src="assets/icons/forum.png"><p>è®ºå›</p></div>
      <div class="app-icon" data-app="words"><img src="assets/icons/words.png"><p>å•è¯</p></div>
      <div class="app-icon" data-app="memo"><img src="assets/icons/memo.png"><p>å¿ƒå£°</p></div>
      <div class="app-icon" data-app="settings"><img src="assets/icons/settings.png"><p>è®¾ç½®</p></div>
    </div>
  </main>

  <section id="app-container" style="display:none;"></section>
</body>
</html>

