<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <!-- ğŸ iOS å…¨å±ä¸çŠ¶æ€æ  -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- æ”¹è¿™é‡Œ -->
  <meta name="theme-color" content="rgba(0,0,0,0)">
  <title>Echo Garden</title>

  <link rel="stylesheet" href="css/main.css">
  <link rel="apple-touch-icon" sizes="512x512" href="assets/icons/icon512.png">
  <link rel="icon" href="assets/icons/icon512.png" type="image/png">
  <script src="js/main.js" defer></script>
</head>

<body>
  <img id="bg-layer" src="assets/bg/night.jpeg" alt="background">
  <button id="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ—</button>
  
<!-- === é¡¶éƒ¨ä¿¡æ¯ç»„ä»¶ï¼ˆç”µé‡æ¡ + åœ†å½¢è¿›åº¦ï¼‰ === -->
<div class="top-widgets">
  <!-- å·¦ä¾§åœ†å½¢é¢æ¿ -->
  <div class="circle-widget">
    <svg class="circle-chart" width="64" height="64" viewBox="0 0 64 64">
      <circle class="bg" cx="32" cy="32" r="28"></circle>
      <circle class="progress" cx="32" cy="32" r="28"></circle>
    </svg>
    <span class="circle-text" id="circle-value">--%</span>
  </div>

  <!-- å³ä¾§æ¡å½¢é¢æ¿ -->
  <div class="bar-widget">
    <div class="bar-inner">
      <div class="bar-fill" id="bar-fill"></div>
    </div>
    <div class="bar-label">Battery</div>
  </div>
</div>


<style>
.top-panel {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(255,255,255,0.2);
  border-radius: 22px;
  padding: 10px 16px;
}

/* å·¦ï¼šåœ†å½¢è¿›åº¦ç¯ */
.battery-circle-box {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}
.battery-circle {
  transform: rotate(-90deg);
}
.battery-circle .bg {
  fill: none;
  stroke: rgba(255,255,255,0.25);
  stroke-width: 4;
}
.battery-circle .progress {
  fill: none;
  stroke: #fff;
  stroke-width: 4;
  stroke-linecap: round;
  stroke-dasharray: 150;
  stroke-dashoffset: 150;
  transition: stroke-dashoffset 0.5s ease;
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.4));
}
#battery-text {
  position: absolute;
  font-size: 13px;
  font-weight: 500;
  color: white;
  text-shadow: 0 0 4px rgba(255,255,255,0.4);
}

/* å³ï¼šæ¨ªæ¡ç”µé‡æ¡ */
.battery-bar-box {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}
.battery-bar {
  width: 140px;
  height: 8px;
  border-radius: 8px;
  background: rgba(255,255,255,0.25);
  overflow: hidden;
  position: relative;
}
.battery-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #a3d9ff, #ffffff);
  border-radius: 8px;
  transition: width 0.6s ease;
  box-shadow: 0 0 6px rgba(255,255,255,0.4);
}
.battery-label {
  font-size: 13px;
  opacity: 0.8;
  color: #fff;
}
</style>

<script>
navigator.getBattery && navigator.getBattery().then(battery => {
  function updateBattery() {
    const level = Math.round(battery.level * 100);
    const circle = document.querySelector(".battery-circle .progress");
    const offset = 150 - (150 * level) / 100;
    circle.style.strokeDashoffset = offset;
    document.getElementById("battery-text").textContent = `${level}%`;
    document.getElementById("battery-fill").style.width = `${level}%`;
  }
  updateBattery();
  battery.addEventListener("levelchange", updateBattery);
});
</script>

  
  <!-- ä¸»å± -->
  <main id="homescreen">
    <div class="app-grid">
      <div class="app-icon" data-app="message"><img src="assets/icons/message.png"><p>æ¶ˆæ¯</p></div>
      <div class="app-icon" data-app="diary"><img src="assets/icons/diary.png"><p>æ—¥è®°</p></div>
      <div class="app-icon" data-app="tarot"><img src="assets/icons/tarot.png"><p>å¡”ç½—</p></div>
      <div class="app-icon" data-app="forum"><img src="assets/icons/forum.png"><p>è®ºå›</p></div>
      <div class="app-icon" data-app="words"><img src="assets/icons/words.png"><p>å•è¯</p></div>
      <div class="app-icon" data-app="memo"><img src="assets/icons/memo.png"><p>å¿ƒå£°</p></div>
      <div class="app-icon" data-app="settings"><img src="assets/icons/settings.png"><p>è®¾ç½®</p></div>
    </div>
  </main>

  <section id="app-container" style="display:none;"></section>
</body>
</html>






